- use handles instead of global structures
- add error handling utilities
